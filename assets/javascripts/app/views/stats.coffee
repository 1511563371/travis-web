@Travis.reopen
  StatsView: Travis.View.extend
    templateName: 'stats/show'
    didInsertElement: ->
      @renderChart(config) for name, config of @CHARTS

    renderChart: (config)->
      # data = [[1293667200000, 3], [1295654400000, 4], [1295740800000, 5], [1296345600000, 8], [1297641600000, 17], [1297728000000, 22], [1297814400000, 25], [1297900800000, 33], [1297987200000, 38], [1298073600000, 40], [1298160000000, 42], [1298332800000, 44], [1298419200000, 47], [1298505600000, 48], [1298678400000, 49], [1298764800000, 51], [1298851200000, 52], [1298937600000, 56], [1299024000000, 59], [1299196800000, 61], [1299456000000, 63], [1299628800000, 64], [1299715200000, 66], [1300492800000, 67], [1300665600000, 68], [1301097600000, 69], [1301270400000, 70], [1301356800000, 72], [1301443200000, 79], [1301616000000, 80], [1301875200000, 81], [1301961600000, 85], [1302048000000, 89], [1302134400000, 92], [1302220800000, 96], [1302393600000, 97], [1302652800000, 98], [1302739200000, 105], [1302825600000, 108], [1302912000000, 110], [1302998400000, 111], [1303084800000, 113], [1303171200000, 116], [1303257600000, 120], [1303344000000, 121], [1303516800000, 123], [1303603200000, 129], [1303689600000, 131], [1303776000000, 132], [1303862400000, 134], [1303948800000, 140], [1304035200000, 141], [1304121600000, 145], [1304208000000, 147], [1304294400000, 151], [1304380800000, 155], [1304467200000, 156], [1304553600000, 164], [1304640000000, 171], [1304726400000, 176], [1304812800000, 181], [1304899200000, 189], [1304985600000, 203], [1305072000000, 208], [1305158400000, 214], [1305244800000, 221], [1305331200000, 222], [1305417600000, 228], [1305504000000, 232], [1305590400000, 234], [1305676800000, 239], [1305763200000, 245], [1305849600000, 250], [1305936000000, 256], [1306022400000, 261], [1306108800000, 268], [1306195200000, 275], [1306281600000, 282], [1306368000000, 286], [1306454400000, 290], [1306540800000, 297], [1306627200000, 300], [1306713600000, 312], [1306800000000, 320], [1306886400000, 327], [1306972800000, 329], [1307059200000, 331], [1307145600000, 337], [1307232000000, 339], [1307318400000, 343], [1307404800000, 350], [1307491200000, 360], [1307577600000, 364], [1307664000000, 370], [1307750400000, 375], [1307836800000, 377], [1307923200000, 385], [1308009600000, 389], [1308096000000, 393], [1308182400000, 403], [1308268800000, 407], [1308355200000, 412], [1308441600000, 418], [1308528000000, 424], [1308614400000, 428], [1308700800000, 443], [1308787200000, 454], [1308873600000, 458], [1308960000000, 469], [1309046400000, 472], [1309132800000, 480], [1309219200000, 498], [1309305600000, 511], [1309392000000, 524], [1309478400000, 534], [1309564800000, 543], [1309651200000, 560], [1309737600000, 567], [1309824000000, 580], [1309910400000, 587], [1309996800000, 597], [1310083200000, 606], [1310169600000, 615], [1310256000000, 622], [1310342400000, 631], [1310428800000, 636], [1310515200000, 641], [1310601600000, 654], [1310688000000, 679], [1310774400000, 686], [1310860800000, 694], [1310947200000, 698], [1311033600000, 699], [1311120000000, 712], [1311206400000, 733], [1311292800000, 745], [1311379200000, 747], [1311465600000, 753], [1311552000000, 773], [1311638400000, 778], [1311724800000, 837], [1311811200000, 868], [1311897600000, 893], [1311984000000, 914], [1312070400000, 931], [1312156800000, 955], [1312243200000, 973], [1312329600000, 986], [1312416000000, 1001], [1312502400000, 1026], [1312588800000, 1064], [1312675200000, 1070], [1312761600000, 1079], [1312848000000, 1094], [1312934400000, 1124], [1313020800000, 1164], [1313107200000, 1193], [1313193600000, 1210], [1313280000000, 1227], [1313366400000, 1242], [1313452800000, 1276], [1313539200000, 1308], [1313625600000, 1329], [1313712000000, 1357], [1313798400000, 1373], [1313884800000, 1381], [1313971200000, 1403], [1314057600000, 1426], [1314144000000, 1443], [1314230400000, 1458], [1314316800000, 1475], [1314403200000, 1486], [1314489600000, 1490], [1314576000000, 1502], [1314662400000, 1507], [1314748800000, 1513], [1314835200000, 1522], [1314921600000, 1536], [1315008000000, 1548], [1315094400000, 1560], [1315180800000, 1569], [1315267200000, 1586], [1315353600000, 1600], [1315440000000, 1611], [1315526400000, 1632], [1315612800000, 1647], [1315699200000, 1658], [1315785600000, 1671], [1315872000000, 1701], [1315958400000, 1713], [1316044800000, 1738], [1316131200000, 1764], [1316217600000, 1775], [1316304000000, 1788], [1316390400000, 1805], [1316476800000, 1826], [1316563200000, 1843], [1316649600000, 1858], [1316736000000, 1880], [1316822400000, 1889], [1316908800000, 1909], [1316995200000, 1921], [1317081600000, 1941], [1317168000000, 1959], [1317254400000, 1969], [1317340800000, 1991], [1317427200000, 2004], [1317513600000, 2024], [1317600000000, 2042], [1317686400000, 2060], [1317772800000, 2070], [1317859200000, 2086], [1317945600000, 2100], [1318032000000, 2111], [1318118400000, 2121], [1318204800000, 2135], [1318291200000, 2149], [1318377600000, 2160], [1318464000000, 2171], [1318550400000, 2184], [1318636800000, 2198], [1318723200000, 2214], [1318809600000, 2244], [1318896000000, 2259], [1318982400000, 2280], [1319068800000, 2296], [1319155200000, 2328], [1319241600000, 2347], [1319328000000, 2358], [1319414400000, 2377], [1319500800000, 2391], [1319587200000, 2409], [1319673600000, 2433], [1319760000000, 2449], [1319846400000, 2458], [1319932800000, 2469], [1320019200000, 2489], [1320105600000, 2499], [1320192000000, 2513], [1320278400000, 2525], [1320364800000, 2540], [1320451200000, 2556], [1320537600000, 2575], [1320624000000, 2606], [1320710400000, 2622], [1320796800000, 2655], [1320883200000, 2684], [1320969600000, 2710], [1321056000000, 2759], [1321142400000, 2818], [1321228800000, 2877], [1321315200000, 2930], [1321401600000, 2963], [1321488000000, 3020], [1321574400000, 3075], [1321660800000, 3099], [1321747200000, 3133], [1321833600000, 3176], [1321920000000, 3226], [1322006400000, 3253], [1322092800000, 3279], [1322179200000, 3312], [1322265600000, 3325], [1322352000000, 3344], [1322438400000, 3366], [1322524800000, 3409], [1322611200000, 3453], [1322697600000, 3491], [1322784000000, 3530], [1322870400000, 3566], [1322956800000, 3587], [1323043200000, 3609], [1323129600000, 3632], [1323216000000, 3649], [1323302400000, 3680], [1323388800000, 3708], [1323475200000, 3726], [1323561600000, 3748], [1323648000000, 3775], [1323734400000, 3803], [1323820800000, 3824], [1323907200000, 3860], [1323993600000, 3891], [1324080000000, 3914], [1324166400000, 3946], [1324252800000, 3967], [1324339200000, 4010], [1324425600000, 4055], [1324512000000, 4085], [1324598400000, 4112], [1324684800000, 4131], [1324771200000, 4142], [1324857600000, 4160], [1324944000000, 4187], [1325030400000, 4212], [1325116800000, 4226], [1325203200000, 4250], [1325289600000, 4270], [1325376000000, 4282], [1325462400000, 4302], [1325548800000, 4334], [1325635200000, 4369], [1325721600000, 4412], [1325808000000, 4448], [1325894400000, 4483], [1325980800000, 4527], [1326067200000, 4560], [1326153600000, 4606], [1326240000000, 4637], [1326326400000, 4672], [1326412800000, 4706], [1326499200000, 4725], [1326585600000, 4767], [1326672000000, 4805], [1326758400000, 4846], [1326844800000, 4865], [1326931200000, 4902], [1327017600000, 4933], [1327104000000, 4964], [1327190400000, 4993], [1327276800000, 5025], [1327363200000, 5072], [1327449600000, 5113], [1327536000000, 5152], [1327622400000, 5192], [1327708800000, 5231], [1327795200000, 5265], [1327881600000, 5302], [1327968000000, 5344], [1328054400000, 5396], [1328140800000, 5432], [1328227200000, 5470], [1328313600000, 5496], [1328400000000, 5534], [1328486400000, 5564], [1328572800000, 5629], [1328659200000, 5683], [1328745600000, 5751], [1328832000000, 5807], [1328918400000, 5850], [1329004800000, 5905], [1329091200000, 5957], [1329177600000, 6015], [1329264000000, 6081], [1329350400000, 6120], [1329436800000, 6163], [1329523200000, 6208], [1329609600000, 6254], [1329696000000, 6309], [1329782400000, 6379], [1329868800000, 6439], [1329955200000, 6525], [1330041600000, 6592], [1330128000000, 6621], [1330214400000, 6663], [1330300800000, 6792], [1330387200000, 6885], [1330473600000, 6949], [1330560000000, 6995], [1330646400000, 7050], [1330732800000, 7122], [1330819200000, 7172], [1330905600000, 7245], [1330992000000, 7326], [1331078400000, 7409], [1331164800000, 7486], [1331251200000, 7544], [1331337600000, 7587], [1331424000000, 7643], [1331510400000, 7735], [1331596800000, 7821], [1331683200000, 7886], [1331769600000, 7952], [1331856000000, 8026], [1331942400000, 8077], [1332028800000, 8115], [1332115200000, 8169], [1332201600000, 8244], [1332288000000, 8288], [1332374400000, 8362], [1332460800000, 8421], [1332547200000, 8472], [1332633600000, 8515], [1332720000000, 8580], [1332806400000, 8635], [1332892800000, 8684], [1332979200000, 8755], [1333065600000, 8800], [1333152000000, 8859], [1333238400000, 8930], [1333324800000, 9001], [1333411200000, 9273], [1333497600000, 9340], [1333584000000, 9404], [1333670400000, 9460], [1333756800000, 9514], [1333843200000, 9561], [1333929600000, 9619], [1334016000000, 9693], [1334102400000, 9768], [1334188800000, 9814], [1334275200000, 9872], [1334361600000, 9931], [1334448000000, 9989], [1334534400000, 10044], [1334620800000, 10101], [1334707200000, 10155], [1334793600000, 10204], [1334880000000, 10266], [1334966400000, 10310], [1335052800000, 10354], [1335139200000, 10406], [1335225600000, 10478], [1335312000000, 10544], [1335398400000, 10616], [1335484800000, 10680], [1335571200000, 10726], [1335657600000, 10765], [1335744000000, 10814], [1335830400000, 10894], [1335916800000, 10976], [1336003200000, 11058], [1336089600000, 11101], [1336176000000, 11148], [1336262400000, 11191], [1336348800000, 11264], [1336435200000, 11331], [1336521600000, 11415], [1336608000000, 11500], [1336694400000, 11611], [1336780800000, 11674], [1336867200000, 11713], [1336953600000, 11792], [1337040000000, 11869], [1337126400000, 11933], [1337212800000, 12008], [1337299200000, 12092], [1337385600000, 12172], [1337472000000, 12232], [1337558400000, 12320], [1337644800000, 12400], [1337731200000, 12456], [1337817600000, 12519], [1337904000000, 12581], [1337990400000, 12663], [1338076800000, 12804], [1338163200000, 12898], [1338249600000, 13012], [1338336000000, 13106], [1338422400000, 13188], [1338508800000, 13267], [1338595200000, 13322], [1338681600000, 13386], [1338768000000, 13485], [1338854400000, 13577], [1338940800000, 13648], [1339027200000, 13692], [1339113600000, 13754], [1339200000000, 13783], [1339286400000, 13825], [1339372800000, 13897], [1339459200000, 13970], [1339545600000, 14050], [1339632000000, 14150], [1339718400000, 14207], [1339804800000, 14279], [1339891200000, 14327], [1339977600000, 14387], [1340064000000, 14466], [1340150400000, 14540], [1340236800000, 14607], [1340323200000, 14694], [1340409600000, 14743], [1340496000000, 14787], [1340582400000, 14850], [1340668800000, 14929], [1340755200000, 14977], [1340841600000, 15052], [1340928000000, 15105], [1341014400000, 15148], [1341100800000, 15215], [1341187200000, 15276], [1341273600000, 15373], [1341360000000, 15432], [1341446400000, 15497], [1341532800000, 15568], [1341619200000, 15637], [1341705600000, 15686], [1341792000000, 15765], [1341878400000, 15841], [1341964800000, 15914], [1342051200000, 15974], [1342137600000, 16028], [1342224000000, 16079], [1342310400000, 16133], [1342396800000, 16190], [1342483200000, 16255], [1342569600000, 16323], [1342656000000, 16402], [1342742400000, 16488], [1342828800000, 16543], [1342915200000, 16586], [1343001600000, 16651], [1343088000000, 16718], [1343174400000, 16790], [1343260800000, 16850], [1343347200000, 16900], [1343433600000, 16941], [1343520000000, 16981], [1343606400000, 17048], [1343692800000, 17110], [1343779200000, 17170], [1343865600000, 17225], [1343952000000, 17324], [1344038400000, 17362], [1344124800000, 17417], [1344211200000, 17487], [1344297600000, 17547], [1344384000000, 17635], [1344470400000, 17704], [1344556800000, 17764], [1344643200000, 17812], [1344729600000, 17855], [1344816000000, 17924], [1344902400000, 18024], [1344988800000, 18105], [1345075200000, 18172], [1345161600000, 18239], [1345248000000, 18286], [1345334400000, 18296]]
      chart = new Highcharts.Chart(config)
      @fetch config.source, (data) ->
        chart.series[0].setData(data)

    fetch: (url, callback)->
      $.ajax
        type: 'GET'
        url: url
        accepts: { json: 'application/vnd.travis-ci.2+json' }
        success: callback
        error: -> console.log(arguments)

    CHARTS:
      repos:
        source: '/stats/repos'
        chart:
          renderTo: "repos_stats"
        title:
          text: "Total Projects/Repositories"
        xAxis:
          type: "datetime"
          dateTimeLabelFormats: # don't display the dummy year
            month: "%e. %b"
            year: "%b"
        yAxis:
          title:
            text: "Count"
          min: 0
        tooltip:
          formatter: ->
            Highcharts.dateFormat("%e. %b", @x) + ": " + @y + " repos"
        series: [
          name: "Repository Growth"
          data: []
        ]


